{% extends '/admin/dashboard.html.twig' %}

{% block title %}Edit Category{% endblock %}

{% block main_content %}
    <h1>Edit Category</h1>
    {% set categoryFolder = category.getName()|upper %}
    {% for photo in photos %}
        <img src='{{ asset('photos/public/' ~ categoryFolder ~ '/' ~ photo.filename) }}'/>

    {% endfor %}


    {{ include('admin/category/_form.html.twig', {'button_label': 'Update'}) }}

    <a href="{{ path('app_admin_category_index') }}" class="back-button">Revenir en arri√®re</a>

    {{ include('admin/category/_delete_form.html.twig') }}
    <script>
	var newPhotosPrototype = document.querySelector('#category_newPhotos').dataset.prototype;

    // Remplacer __name__ par un nom unique
    var uniqueId = new Date().getTime(); // Utiliser un timestamp comme identifiant unique
    var newPhotosPrototypeModified = newPhotosPrototype.replace(/__name__/g, uniqueId);

    var tempDiv = document.createElement('div');
    tempDiv.innerHTML = newPhotosPrototypeModified;

    var newPhotoPrototypeElement = tempDiv.firstChild;

    document.querySelector(".newPhotosContainer").appendChild(newPhotoPrototypeElement);
</script>
{% endblock %}
