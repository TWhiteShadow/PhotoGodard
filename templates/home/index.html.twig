{% extends 'base.html.twig' %}
{% block title %}Emmanuel Godard Photographie - Bienvenue dans mon monde.
{% endblock %}
{% block body %}
<div class="scroll-smooth w-full" id="fullpage">
	{# SECTION 1 FIRST PAGE #}
	<section class="md:hidden swiper mySwiper homeSectionMobile">
		<div
			class="flex items-center sm:items-start flex-col absolute top-[20%] translate-x-[-50%] left-[50%] gap-3 z-20 text-center text-white drop-shadow-xl">
			<h1 class="text-3xl uppercase tracking-[0.5rem] font-light">{{homepage.title}}</h1>
			<h4 class="text-md uppercase tracking-[0.5rem] font-light">{{homepage.subtitle}}</h4>
		</div>
		<div class="swiper-wrapper h-[100svh] w-screen object-cover">
			<img src="{{ asset(homepage.photoBottom) | imagine_filter('webp') }}"
				class="swiper-slide h-screen w-screen object-cover" alt="photo-carousel-3" width="1080" height="1920">
			<img src="{{ asset(homepage.photoMiddle) | imagine_filter('webp') }}"
				class="swiper-slide h-screen w-screen object-cover" alt="photo-carousel-2" width="1080" height="1920">
			<img src="{{ asset(homepage.photoTopLeft) | imagine_filter('webp') }}"
				class="swiper-slide h-screen w-screen object-cover" alt="photo-carousel-1" width="1080" height="1920">
		</div>
		<div class="swiper-pagination"></div>
	</section>

	<section class="hidden md:flex section section-home bg-gray-100 w-full md:flex-col flex-row pb-[5vh] md:pb-0">
		<div class="flex h-full items-center justify-center w-[60%] z-0">
			<div id="scene" class="h-full w-full" data-pointer-events="true">
				<!-- Image top left -->
				<div class="relative top-[10%] left-[15%] bottom-auto right-auto w-fit z-40 drop-shadow-2xl"
					data-depth="-0.36">
					<div class="atropos atropos-section-1">
						<!-- scale container (required) -->
						<div class="atropos-scale">
							<!-- rotate container (required) -->
							<div class="atropos-rotate">
								<!-- inner container (required) -->
								<div class="atropos-inner">
									<!-- put your custom content here -->
									<div class="relative">
										<img class="max-w-[15vw] max-h-[15vh] w-auto h-auto aspect-auto" 
											src="{{ asset(homepage.photoTopLeft) | imagine_filter('webp')}}"
											data-atropos-offset="-5" alt="photos présentation 3" width="150"
											height="150" loading="lazy">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Image center -->
				<div class="absolute top-1/4 left-1/4 bottom-auto right-auto w-auto drop-shadow-2xl" data-depth="0.2">
					<!-- main Atropos container (required), add your custom class here -->
					<div class="atropos atropos-section-1">
						<!-- scale container (required) -->
						<div class="atropos-scale">
							<!-- rotate container (required) -->
							<div class="atropos-rotate">
								<!-- inner container (required) -->
								<div class="atropos-inner">
									<!-- put your custom content here -->
									<div class="relative">
										<img class="max-w-[40vw] max-h-[40vh] w-auto h-auto aspect-auto" 
											src="{{ asset(homepage.photoMiddle) | imagine_filter('webp')}}"
											data-atropos-offset="-2" alt="photos présentation 1" width="500"
											height="400">

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Image bottom left -->
				<div class=" absolute top-[60%] left-[17%] bottom-auto right-auto w-auto z-10 drop-shadow-2xl"
					data-depth=" -0.2">
					<div class=" atropos atropos-section-1">
						<!-- scale container (required) -->
						<div class="atropos-scale">
							<!-- rotate container (required) -->
							<div class="atropos-rotate">
								<!-- inner container (required) -->
								<div class="atropos-inner">
									<!-- put your custom content here -->
									<div class="relative">
										<img class="max-w-[20vw] max-h-[20vh] w-auto h-auto aspect-auto" 
											src="{{ asset(homepage.photoBottom) | imagine_filter('webp') }}"
											data-atropos-offset="-2.5" alt="photos présentation 2" width="250"
											height="150" loading="lazy">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="flex h-full flex-col items-center sm:items-start justify-center md:w-[40%] gap-3 z-20">
			<h3
				class="text-3xl lg:text-2xl xl:text-3xl uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm">
				{{homepage.title}}</h3>
			<h4
				class="text-md md:text-[0.7rem] xl:text-base uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm">
				{{homepage.subtitle}}</h4>
		</div>
	</section>


	{# SECTION 2 ABOUT #}
	<section
		class="section section-about h-full pb-[5vh] pt-[5vh] md:pt-0 md:pb-0 relative bg-gray-100 w-full snap-center justify-evenly flex flex-col gap-5 items-center px-10">
		<h4
			class="text-md uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm w-full text-center md:absolute top-[6%] pb-8 md:pb-0">
			About
		</h4>
		<div class="flex flex-col md:flex-row justify-evenly items-center w-full h-full gap-10 flex-wrap">
			{# optional #}
			<div class="flex flex-col justify-center items-center md:gap-8">
				<img class="max-w-[50vw] max-h-[30vh] w-auto h-auto aspect-auto grayscale-[100%] hover:grayscale-0 transition-all duration-1000 easy-in-out"
					 src="{{ asset(homepage.pfp) | imagine_filter('webp')}}" alt="photo Emmanuel Godard"
					width="293.09" height="293.09">
			</div>
			{# #}
			<div class="flex flex-col justify-center items-center md:gap-8">
				<h3 class="text-clamp-xl text-center uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm">
					{{homepage.descriptionTitle}}</h3>
				<p class="max-w-[60ch] text-justify text-lg font-light leading-[1.75] whitespace-pre-line">
					{{homepage.descriptionText}}</p>
			</div>
		</div>
	</section>

	{# SECTION 3 WORKS #}

	<section
		class="section section-works md:h-screen h-auto min-height-screen pb-[5vh] md:pb-0 relative bg-gray-100 w-full snap-center justify-evenly flex flex-col gap-5 items-center">
		<h4
			class="text-md uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm w-full text-center md:absolute top-[6%] md:pb-8">
			Works
		</h4>

		{# <div
			class="flex flex-col md:flex-row justify-evenly min-h-fit h-[80%] md:h-[40%] w-[80%] gap-[3vw] items-stretch">
			#}
			<!-- Slider main container -->
			<div class="swiper2 relative overflow-hidden h-[80%] py-20 w-screen md:w-[80%] gap-[3vw] items-stretch">
				<!-- Additional required wrapper -->
				<div class="swiper-wrapper">
					{% set validCategorie = false %}
					{% if categories|length > 0 %}
					{% for categorie in categories %}
					{% if categorie.getPhotos()|length > 0 %}
					{% set validCategorie = true %}
					{% set cardImgPath = ( categorie.getFavoritePhoto() is not null ? asset( 'photos/public/' ~
					categorie.getUniqId()|upper ~ '/' ~ categorie.getFavoritePhoto().getFilename()) : asset(
					'photos/public/' ~ categorie.getUniqId()|upper ~ '/' ~ (categorie.getPhotos()|last).getFilename()) )
					%}
					{% include "/home/_atropos-card.html.twig" with {
					'card_controller' : "category",
					'card_id' : categorie.getId(),
					'card_img_path' : cardImgPath | imagine_filter('webp'),
					'card_name' : categorie.getName(),
					'card_photo_count' : categorie.getPhotos()|length|trans ~ " photos"
					} %}
					{% endif %}
					{% endfor %}
					{% endif %}
					{% if validCategorie == false %}
					<div class="swiper-slide h-[400px] md:h-auto text-center flex justify-center items-center">
						<p>Aucune categorie n'a encore été ajoutée</p>
					</div>
					{% endif %}
				</div>
				<!-- If we need navigation buttons -->
				<div class="swiper-button-prev"></div>
				<div class="swiper-button-next"></div>

			</div>

	</section>

	{# SECTION 4 albums #}
	<section
		class="section section-works md:h-screen h-auto min-height-screen pb-[5vh] md:pb-0 relative bg-gray-100 w-full snap-center justify-evenly flex flex-col gap-5 items-center">
		<h4
			class="text-md uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm w-full text-center md:absolute top-[6%] pb-8">
			Albums
		</h4>
		<div class="group z-20 md:absolute top-[10%] md:pb-8">
			<i class="fa-solid fa-magnifying-glass icon" ></i>
			<input id="filterAlbumsInput" class="input" type="search" placeholder="Cherchez" />
		</div>
		{# <div
			class="flex flex-col md:flex-row justify-evenly min-h-fit h-[80%] md:h-[40%] w-[80%] gap-[3vw] items-stretch">
			#}
			<!-- Slider main container -->
			<div class="h-[70vh] md:h-[80%] md:w-[80%] z-10 relative overflow-hidden w-screen ">
				<div class="absolute sliderOverlay w-full h-[calc(100%-6rem)] mt-12 flex justify-center items-center">
					<h4
						class="text-md uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm w-full text-center">
						Aucun album trouvé</h4>
				</div>
				<div class="swiper3 z-10 relative overflow-hidden h-full py-20 w-full gap-[3vw] items-stretch">
					<!-- Additional required wrapper -->
					<div class="swiper-wrapper h-full w-full" id="albumSwipperWrapper">
						{% include "home/_atropos-cards.html.twig" %}
					</div>
					<!-- If we need navigation buttons -->
					<div class="swiper-button-prev"></div>
					<div class="swiper-button-next"></div>
				</div>
			</div>

	</section>

	{# SECTION 5 Contacts #}
	<section
		class="section section-contacts mb-40 md:mb-0 h-full md:h-screen relative bg-gray-100 w-full snap-center justify-evenly flex flex-col gap-5 items-center"
		data-fp-styles="null">
		<h4
			class="text-md uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm w-full text-center md:absolute top-[6%]">
			Contacts
		</h4>
		<div class="flex flex-col justify-center items-center gap-8 px-5 z-10 drop-shadow-2xl">
			<p class="text-clamp max-w-[60ch] text-center font-light leading-[1.75] whitespace-pre-line">
				{{homepage.contactDescription}}</p>
			<a href="tel:{{homepage.contactNumber}}" class="text-center">
				<h3 class="text-clamp-xl uppercase tracking-[0.25rem] sm:tracking-[0.5rem] font-light drop-shadow-sm">
					{{homepage.contactNumber}}</h3>
			</a>
			<a href="https://www.google.com/maps/search/{{homepage.contactLocation}}" target="_blank"
				class="text-center">
				<p
					class="text-clamp max-w-[60ch] text-center text-[#333] font-light leading-[1.75] whitespace-pre-line">
					{{homepage.contactLocation}}</p>
			</a>
			<a href="mailto:{{homepage.contactEmail}}">
				<h3 class=" tracking-[0] text-[#333] font-light drop-shadow-sm text-clamp-xl">{{homepage.contactEmail}}
				</h3>
			</a>
		</div>
		<div class="md:flex hidden absolute h-full w-full items-center justify-center z-0 overflow-hidden">
			<div id="sceneContact" class="h-full w-full" data-pointer-events="true">
				<!-- Image top right -->
				<div class="relative top-[15%] left-[85%] bottom-auto right-auto w-fit z-40 drop-shadow-2xl opacity-90"
					data-depth="-0.36">
					<div class="atropos atropos-section-1">
						<!-- scale container (required) -->
						<div class="atropos-scale">
							<!-- rotate container (required) -->
							<div class="atropos-rotate">
								<!-- inner container (required) -->
								<div class="atropos-inner">
									<!-- put your custom content here -->
									<div class="relative">
										<img class="max-w-[20vw] max-h-[20vh] w-auto h-auto aspect-auto"
											src="{{ asset(homepage.contactPhotoTopRight) | imagine_filter('webp')}}"
											data-atropos-offset="-5" alt="photos présentation 3" width="150"
											height="150" loading="lazy">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Image bottom right -->
				<div class="absolute top-[65%] right-auto bottom-auto left-[75%] w-auto drop-shadow-2xl opacity-50"
					data-depth="0.2">
					<!-- main Atropos container (required), add your custom class here -->
					<div class="atropos atropos-section-1">
						<!-- scale container (required) -->
						<div class="atropos-scale">
							<!-- rotate container (required) -->
							<div class="atropos-rotate">
								<!-- inner container (required) -->
								<div class="atropos-inner">
									<!-- put your custom content here -->
									<div class="relative">
										<img class="max-w-[30vw] max-h-[30vh] w-auto h-auto aspect-auto"
											src="{{ asset(homepage.contactPhotoBottomRight) | imagine_filter('webp')}}"
											data-atropos-offset="-2" alt="photos présentation 1" width="500"
											height="400" loading="lazy">

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Image bottom left -->
				<div class=" absolute top-[70%] right-[80%] bottom-auto left-auto w-auto z-10 drop-shadow-2xl opacity-90"
					data-depth=" -0.2">
					<div class=" atropos atropos-section-1">
						<!-- scale container (required) -->
						<div class="atropos-scale">
							<!-- rotate container (required) -->
							<div class="atropos-rotate">
								<!-- inner container (required) -->
								<div class="atropos-inner">
									<!-- put your custom content here -->
									<div class="relative">
										<img class="max-w-[20vw] max-h-[20vh] w-auto h-auto aspect-auto"
											src="{{ asset(homepage.contactPhotoBottomLeft) | imagine_filter('webp') }}"
											data-atropos-offset="-2.5" alt="photos présentation 2" width="250"
											height="150" loading="lazy">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</div>

{# SideBar Menu #}
<div class="hidden md:block md:fixed top-[50%] left-[97%] translate-y-[-50%] translate-x-[-50%] z-50 sidebar">
	<ul class="flex gap-5 flex-col" id="sidebar">
		<li data-menuanchor="home">
			<a href="#home" class="active">
				<span>
					<p>Home</p>
				</span>
			</a>
		</li>
		<li data-menuanchor="about">
			<a href="#about">
				<span>
					<p>About</p>
				</span>
			</a>
		</li>
		<li data-menuanchor="works">
			<a href="#works">
				<span>
					<p>Works</p>
				</span>
			</a>
		</li>
		<li data-menuanchor="albums">
			<a href="#albums">
				<span>
					<p>Album</p>
				</span>
			</a>
		</li>
		<li data-menuanchor="contacts">
			<a href="#contacts">
				<span>
					<p>Contacts</p>
				</span>
			</a>
		</li>
	</ul>
</div>


{# Hamburger Menu Icon#}
<div class="menu fixed menuHamburger top-1 right-1 left-auto" data-menu="1">
	<div>
		<div class="icon-left"></div>
		<div class="icon-right"></div>
	</div>
</div>

<div class="overlay">
	<div class="flex relative flex-col h-full w-full justify-center items-center menuPage">
		<div class="w-full text-center absolute top-[9%]">
			<h3 class="text-3xl uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm">
				{{homepage.title}}
			</h3>
			<h4 class="text-md uppercase tracking-[0.5rem] text-[#333] font-light drop-shadow-sm">
				{{homepage.subtitle}}
			</h4>
		</div>
		<ul class="flex gap-5 flex-col">
			<li data-menuanchor="home">
				<a id="menuBurgerHomeHref" href="#home">
					<span class="active">Home</span>
				</a>
			</li>
			<li data-menuanchor="about">
				<a href="#about">
					<span>About</span>
				</a>
			</li>
			<li data-menuanchor="works">
				<a href="#works">
					<span>Works</span>
				</a>
			</li>
			<li data-menuanchor="albums">
				<a href="#albums">
					<span>Albums</span>
				</a>
			</li>
			<li data-menuanchor="contacts">
				<a href="#contacts">
					<span>Contacts</span>
				</a>
			</li>
		</ul>

	</div>
</div>

{# FOOTER #}
<footer id="footer" class="fixed w-screen bottom-0 top-auto hide">
	<div class="flex flex-col justify-evenly items-center h-full">
		<ul class="flex gap-5 justify-center items-center">
		{% for link in footer_links %}
		<li>
				<a href="{{link.link}}" target="_blank" class="footerIcon">
					{{link.icon}}
				</a>
			</li>
		{% endfor %}
		</ul>
		<p>©
			<span id="year"></span>
			Emmanuel Godard.
		</p>
	</div>
</footer>
{% include "_canvas.html.twig" %}
<script>
	
	var swiper = new Swiper(".mySwiper", {

		speed: 700,
		pagination: {
			el: ".swiper-pagination",
			clickable: true,
		},
		edgeSwipeDetection: true,
		loop: true,
	});

	const swiper8888 = new Swiper('.swiper2', {
		// Optional parameters
		direction: 'horizontal',
		loop: true,
		slidesPerView: 1.4,
		centeredSlides: true,
		spaceBetween: 30,
		grabCursor: true,
		keyboard: true,
		observer: true,
		speed: 700,
		touchReleaseOnEdges: true,
		touchStartForcePreventDefault: true,
		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev',
		},
		breakpoints: {
			768: {
				slidesPerView: 2,
			}
		},
	});

	const swiperAlbum = new Swiper('.swiper3', {
		// Optional parameters
		direction: 'horizontal',
		loop: false,
		slidesPerView: 1.35,
		centeredSlides: true,
		spaceBetween: 30,
		grabCursor: true,
		keyboard: true,
		observer: true,
		speed: 700,
		slidesPerGroup: 1,
		grid: {
			rows: 1,
		},
		loopAddBlankSlides: true,
		loopAdditionalSlides: 1,
		on: {
			beforeInit: function () {
				let numOfSlides = this.wrapperEl.querySelectorAll(".swiper-slide");
				if (numOfSlides.length > 8) {
					this.params.loop = true;
				}
				if (numOfSlides.length == 1) {
					this.params.grid.rows = 1;
					numOfSlides[0].classList.add("heightImportant");
				}
			},
			update: function () {
				let numOfSlides = this.wrapperEl.querySelectorAll(".swiper-slide");
				if (numOfSlides.length == 1) {
					this.params.grid.rows = 1;
					numOfSlides[0].classList.add("heightImportant");
				} else {
					numOfSlides.forEach((e) => e.classList.remove("heightImportant"));
					if (window.innerWidth >= 768) {
						this.params.grid.rows = 2;
					}
				}
			},
		},
		breakpoints: {
			768: {
				// centeredSlides: false,
				slidesPerView: 2.5,
				grid: {
					rows: 2,
				},
			}
		},
		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev',
		},
	});

	window.addEventListener('resize', function () {
		if (window.innerWidth < 768) {
			swiperAlbum.update();
		}
	});
	
</script>
{% endblock %}